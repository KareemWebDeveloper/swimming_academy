import{d as j,u as z,r as a,o as A,k as E,l as P,C as R,a as m,c as g,b as s,w as y,e as u,g as e,m as D,f as b,t as p,F as I,h as S,s as B,v as M}from"./index-5ed95cfa.js";import{s as N}from"./successMsg-575c06f8.js";import{s as U}from"./inputswitch.esm-9e5e7f7f.js";import{i as $}from"./isEmployeeAuthorizedFor-df272e7f.js";/* empty css                                                   */const K={class:"flex align-items-center justify-content-center"},H={class:"flex align-items-center mx-5 justify-content-center flex-column"},L=e("div",{class:"flex align-items-center my-2"},[e("span",{class:"material-symbols-outlined mx-1 text-2xl"}," tag "),e("h4",null,"الكود")],-1),G={class:"flex align-items-center mx-5 justify-content-center flex-column"},J=e("div",{class:"flex align-items-center my-2"},[e("h4",null,"الاسم"),e("span",{class:"material-symbols-outlined text-2xl"}," scuba_diving ")],-1),O={class:"flex align-items-center mx-5 justify-content-center flex-column"},Q=e("div",{class:"flex align-items-center my-2"},[e("span",{class:"material-symbols-outlined mx-1 text-2xl"}," monetization_on "),e("h4",null,"الراتب")],-1),W={class:"w-12 md:w-10 m-auto p-2 md:p-5 branches"},X=e("h1",{class:"p-4 text-center textColor"},"تسجيل مدرب جديد",-1),Y={class:"w-8 m-auto"},Z={key:1,class:"px-3 py-2 textColor text-center borderRound error"},ee={key:0},te={class:"flex grid w-full"},se={class:"mt-3 col-12"},ae=e("div",{class:"flex align-items-center"},[e("label",{for:"name",class:"px-3 py-1 text-white text-sm"},"اسم المدرب")],-1),le={class:"mt-3 col-12 md:col-6"},oe=e("div",{class:"flex align-items-center"},[e("label",{for:"mail",class:"px-3 py-1 text-white text-sm"},"البريد الالكتروني")],-1),ie={class:"mt-3 col-12 md:col-6"},ne=e("div",{class:"flex align-items-center"},[e("label",{for:"phone",class:"px-3 py-1 text-white text-sm"},"رقم الهاتف")],-1),ce={class:"col-12 md:col-6"},re=e("div",{class:"flex align-items-center"},[e("label",{for:"Pw",class:"px-3 py-1 text-white text-sm"},"كلمة السر")],-1),de={class:"col-12 md:col-6"},me=e("div",{class:"flex align-items-center"},[e("label",{for:"salary_per_hour",class:"px-3 py-1 text-white text-sm"},"الراتب في الساعة")],-1),ue={class:"col-12"},pe=e("div",{class:"flex align-items-center"},[e("label",{for:"address",class:"px-3 py-1 text-white text-sm"},"عنوان المدرب")],-1),he={class:"col-12"},ve=e("div",{class:"flex align-items-center"},[e("label",{for:"address",class:"px-3 py-1 text-white text-sm"},"الفروع التي يعمل بها")],-1),_e={class:"flex justify-content-center align-items-center my-3"},fe=e("h4",{class:"text-sm mx-2 textColor"},"ابق في نفس الصفحة",-1),ke=j({__name:"coachCreate",setup(xe){const{push:h,currentRoute:w}=z(),C=a([]),v=a(!1),_=a(!1),f=a(!1),k=a(!1),i=a(),n=a(!1),c=a(),r=a(!1),F=l=>{n.value=!0,console.log(l),S.post("https://akademia.website/api/createCoach",l).then(t=>{c.value=t.data.coach,n.value=!1,_.value=!1,v.value=!0,window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{r.value=!0,v.value=!1},1400)}).catch(t=>{window.scrollTo({top:0,behavior:"smooth"}),n.value=!1,_.value=!0,t.response.data.message.includes("The phone has already been taken")?i.value="هذا الهاتف موجود بالفعل":t.response.data.message.includes("The email has already been taken")?i.value="هذا البريد الالكتروني موجود بالفعل":i.value=t.response.data.message,console.log(t)})},q=()=>{S.get("https://akademia.website/api/branches").then(l=>{console.log(l.data),l.data.branches.forEach(t=>{C.value.push({label:t.branch_name,value:t.id})}),k.value=!0}).catch(l=>{console.log(l)})},V=()=>{f.value||h("/coaches")},x=a(),T=a("admin");return A(()=>{E().then(l=>{l==!1?P().then(t=>{t==!1&&(localStorage.removeItem("SwimmingToken"),location.reload(),console.log("not employee"),h({path:"/login",query:w.value.query})),x.value=t.permissions,T.value="employee",$(x.value,"تسجيل و تعديل المدربين",T.value)||(localStorage.removeItem("SwimmingToken"),console.log("not authorized"),location.reload(),h({path:"/login",query:w.value.query})),console.log(x.value),q()}):q()})}),(l,t)=>{const o=R("FormKit");return m(),g(I,null,[s(u(M),{visible:r.value,"onUpdate:visible":t[1]||(t[1]=d=>r.value=d),onAfterHide:V,modal:"",header:"بيانات المدرب",style:{width:"50vw"}},{footer:y(()=>[s(u(B),{label:"تم",class:"px-4 py-1",onClick:t[0]||(t[0]=d=>r.value=!1),autofocus:""})]),default:y(()=>[e("div",K,[e("div",H,[L,e("p",null,p(c.value.id),1)]),e("div",G,[J,e("p",null,"كابتن / "+p(c.value.name),1)]),e("div",O,[Q,e("p",null,p(c.value.salary_per_hour.toFixed(2))+" ج.م / ساعة",1)])])]),_:1},8,["visible"]),e("div",W,[X,e("div",Y,[v.value?(m(),D(N,{key:0,class:"fadeinright animation-duration-1000 animation-iteration-1"})):b("",!0),_.value?(m(),g("h5",Z,p(i.value),1)):b("",!0)]),k.value?(m(),g("div",ee,[s(o,{type:"form",actions:!1,onSubmit:F},{default:y(()=>[e("div",te,[e("div",se,[ae,s(o,{"prefix-icon":"avatarMan",id:"name",type:"text",label:"اسم المدرب",placeholder:"أدخل اسم المدرب",name:"name",validation:"required|length:2"})]),e("div",le,[oe,s(o,{"prefix-icon":"email",id:"mail",type:"email",label:"البريد الالكتروني",placeholder:"أدخل البريد الالكتروني",name:"email",validation:"required|email"})]),e("div",ie,[ne,s(o,{"prefix-icon":"telephone",id:"phone",type:"text",label:"رقم الهاتف",placeholder:"أدخل رقم هاتف المدرب",name:"phone",validation:"required|length:10"})]),e("div",ce,[re,s(o,{"prefix-icon":"password",id:"Pw",type:"password",label:"كلمة السر",placeholder:"أدخل كلمة السر للمدرب",name:"password",validation:"required|length:8"})]),e("div",de,[me,s(o,{"prefix-icon":"dollar",id:"salary_per_hour",type:"text",label:"الراتب",placeholder:"أدخل الراتب في الساعة للمدرب ",number:"float",name:"salary_per_hour",validation:"required|min:1"})]),e("div",ue,[pe,s(o,{"prefix-icon":"text",id:"address",type:"textarea",label:"العنوان",placeholder:"أدخل عنوان للمدرب ",name:"address",validation:"required|length:3"})]),e("div",he,[ve,s(o,{type:"dropdown",name:"branchIds",label:"الفروع",placeholder:"اختر الفروع التي يعمل بها المدرب",options:C.value,multiple:""},null,8,["options"])])]),e("div",_e,[s(u(U),{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=d=>f.value=d)},null,8,["modelValue"]),fe]),s(u(B),{type:"submit",class:"submitBtn",label:"تسجيل",loading:n.value},null,8,["loading"])]),_:1})])):b("",!0)])],64)}}});export{ke as default};
