import{d as C,u as T,r as a,o as B,k as P,l as S,C as V,a as m,c as f,g as e,m as q,f as v,t as R,b as s,w as U,h as x,e as A,s as D}from"./index-54b3e273.js";import{s as E}from"./successMsg-2def3ef6.js";/* empty css                                                   */const I={class:"w-12 md:w-10 m-auto p-2 md:p-5 branches"},N=e("h1",{class:"p-4 text-center textColor"},"تسجيل منتج جديد",-1),z={class:"w-8 m-auto"},F={key:1,class:"px-3 py-2 textColor text-center borderRound error"},K={class:"flex grid w-full"},M={class:"mt-3 col-12"},$=e("div",{class:"flex align-items-center"},[e("label",{for:"name",class:"px-3 py-1 text-white text-sm"},"اسم المنتج")],-1),L={class:"mt-3 col-12 md:col-6"},j=e("div",{class:"flex align-items-center"},[e("label",{for:"price",class:"px-3 py-1 text-white text-sm"},"سعر بيع المنتج")],-1),G={class:"mt-3 col-12 md:col-6"},H=e("div",{class:"flex align-items-center"},[e("label",{for:"price",class:"px-3 py-1 text-white text-sm"},"تكلفة المنتج")],-1),J={class:"mt-3 col-12 md:col-12"},O=e("div",{class:"flex align-items-center"},[e("label",{for:"count",class:"px-3 py-1 text-white text-sm"},"الكمية المتوفرة من المنتج")],-1),Z=C({__name:"productUpdate",setup(Q){const{push:p,currentRoute:h}=T(),_=parseInt(h.value.params.id),i=a(!1),r=a(!1),b=a(!1),c=a(),n=a(!1),d=a();a(!1);const g=o=>{n.value=!0,console.log(o),x.put(`http://127.0.0.1:8000/api/updateProduct/${_}`,o).then(t=>{n.value=!1,r.value=!1,i.value=!0,window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{b.value?location.reload():p("/products"),i.value=!1},1600)}).catch(t=>{window.scrollTo({top:0,behavior:"smooth"}),n.value=!1,r.value=!0,t.response.data.message.includes("The product name has already been taken")?c.value="هذا المنتج موجود بالفعل":c.value=t.response.data.message,console.log(t)})},u=()=>{x.get(`http://127.0.0.1:8000/api/product/${_}`).then(o=>{d.value=o.data.product}).catch(o=>{console.log(o.response.data),u()})},y=a(),w=a("admin");return B(()=>{P().then(o=>{o==!1?S().then(t=>{t==!1&&(localStorage.removeItem("SwimmingToken"),location.reload(),p({path:"/login",query:h.value.query})),y.value=t.permissions,w.value="employee",u()}):u()})}),(o,t)=>{const l=V("FormKit");return m(),f("div",I,[N,e("div",z,[i.value?(m(),q(E,{key:0,class:"fadeinright animation-duration-1000 animation-iteration-1"})):v("",!0),r.value?(m(),f("h5",F,R(c.value),1)):v("",!0)]),e("div",null,[s(l,{type:"form",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=k=>d.value=k),actions:!1,onSubmit:g},{default:U(()=>[e("div",K,[e("div",M,[$,s(l,{"prefix-icon":"text",id:"name",type:"text",label:"اسم المنتج",placeholder:"أدخل اسم المنتج",name:"product_name",validation:"required|length:2"})]),e("div",L,[j,s(l,{"prefix-icon":"dollar",id:"price",type:"number",number:"float",label:"سعر المنتج",placeholder:"أدخل سعر المنتج",name:"product_price",validation:"required|min:0"})]),e("div",G,[H,s(l,{"prefix-icon":"dollar",id:"price",type:"number",number:"float",label:"تكلفة المنتج",placeholder:"أدخل تكلفة المنتج",name:"product_cost",validation:"required|min:0"})]),e("div",J,[O,s(l,{"prefix-icon":"number",id:"count",type:"number",number:"integer",label:"كمية المنتج",placeholder:"أدخل الكمية المتوفرة من المنتج",name:"product_count",validation:"min:0"})])]),s(A(D),{type:"submit",class:"submitBtn",label:"تسجيل",loading:n.value},null,8,["loading"])]),_:1},8,["modelValue"])])])}}});export{Z as default};
